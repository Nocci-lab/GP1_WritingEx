<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Day 53 æº–ï¼‘ç´šãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°å¼·åŒ–ï¼ä¸¦ã¹æ›¿ãˆå•é¡Œ</title>

<style>
body{
  font-family:"Hiragino Maru Gothic ProN",sans-serif;
  background:#fff9e6;
  text-align:center;
  padding:20px;
}
.frame{
  border:3px solid #b6d957;
  background:#fff;
  padding:20px;
  max-width:980px;
  margin:auto;
  border-radius:12px;
}
.qnum{font-size:24px;font-weight:bold;}
.grammar{
  font-size:18px;
  color:#2b6cb0;
  margin:6px 0;
  font-weight:bold;
}
.jp{
  font-size:15px;
  color:#666;
  margin-bottom:12px;
}
.row{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(90px,1fr));
  gap:10px;
  margin:14px 0;
}
.slot{
  height:60px;
  border:2px dashed #bbb;
  border-radius:8px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.card{
  background:#e6f5e6;
  padding:8px 12px;
  border-radius:8px;
  box-shadow:2px 2px 6px rgba(0,0,0,.25);
  cursor:pointer;
  user-select:none;
  font-size:16px;
  font-weight:bold;
}
button{
  padding:8px 18px;
  font-size:16px;
  margin:6px;
}
#message{
  font-size:20px;
  height:28px;
  font-weight:bold;
}
#progress{
  margin-bottom:10px;
  font-size:16px;
  color:#444;
}
</style>
</head>

<body>

<h2>Day 53 æº–ï¼‘ç´šãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°å¼·åŒ–ï¼ä¸¦ã¹æ›¿ãˆå•é¡Œ</h2>

<div class="frame">

  <div id="progress">
    å…¨ <b id="totalQ"></b> å•ã‚ã‚Šã¾ã™
  </div>

  <div class="qnum" id="qnum"></div>
  <div class="grammar" id="grammar"></div>
  <div class="jp" id="jp"></div>

  <div class="row" id="answerRow"></div>
  <div class="row" id="cardRow"></div>

  <button onclick="checkAnswer()">Check</button>
  <button onclick="shuffle()">Shuffle</button>
  <button id="nextBtn" onclick="nextQ()" style="display:none">NEXT â–¶</button>
  <button onclick="makePDF()">ğŸ“„ PDF</button>

  <div id="message"></div>
</div>

<canvas id="confetti" style="position:fixed;top:0;left:0;pointer-events:none;"></canvas>

<script>
const data = [
{
 grammar:"ç›®çš„ã‚’è¡¨ã™ä¸å®šè©",
 en:["Schools","should","ban","students","from","having","part-time","jobs","to","help","them","focus","on","their","studies","."],
 jp:"å­¦æ ¡ã¯ã€ç”Ÿå¾’ãŒå‹‰å¼·ã«é›†ä¸­ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€ã‚¢ãƒ«ãƒã‚¤ãƒˆã‚’ã™ã‚‹ã“ã¨ã‚’ç¦æ­¢ã™ã¹ãã ã€‚"
},
{
 grammar:"æ–‡ä¸­ã®ç–‘å•è©",
 en:["School","authorities","should","figure","out","why","some","students","skip","classes","and","take","appropriate","measures","to","address","the","issue","."],
 jp:"å­¦æ ¡å½“å±€ã¯ã€ãªãœä¸€éƒ¨ã®ç”Ÿå¾’ãŒæˆæ¥­ã‚’æ¬ å¸­ã™ã‚‹ã®ã‹ã‚’æ˜ã‚‰ã‹ã«ã—ã€ãã®å•é¡Œã«å¯¾å‡¦ã™ã‚‹ãŸã‚ã®é©åˆ‡ãªå¯¾ç­–ã‚’è¬›ã˜ã‚‹ã¹ãã ã€‚"
},
{
 grammar:"å‹•åè©ã‚’ä¸»èªã«",
 en:["Subsidizing","not","only","government","sectors","but","also","private","businesses","will","result","in","significant","economic","growth","."],
 jp:"æ”¿åºœéƒ¨é–€ã ã‘ã§ãªãæ°‘é–“ä¼æ¥­ã«ã‚‚è£œåŠ©é‡‘ã‚’å‡ºã™ã“ã¨ã¯ã€è‘—ã—ã„çµŒæ¸ˆæˆé•·ã‚’ã‚‚ãŸã‚‰ã™ã ã‚ã†ã€‚"
},
{
 grammar:"SVOC",
 en:["Governments","should","encourage","elderly","people","to","engage","in","new","activities","so","that","they","remain","active","members","of","society","."],
 jp:"æ”¿åºœã¯ã€é«˜é½¢è€…ãŒç¤¾ä¼šã®ä¸€å“¡ã¨ã—ã¦ç©æ¥µçš„ã«é–¢ã‚ã‚Šç¶šã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã€æ–°ã—ã„æ´»å‹•ã«å‚åŠ ã™ã‚‹ã“ã¨ã‚’ä¿ƒã™ã¹ãã ã€‚"
},
{
 grammar:"é–¢ä¿‚ä»£åè©",
 en:["Human","activities",",","which","usually","involve","the","emission","of","carbon","dioxide",",","contribute","to","global","warming","."],
 jp:"ã€Œé€šå¸¸ã€äºŒé…¸åŒ–ç‚­ç´ ã®æ’å‡ºã‚’ä¼´ã†äººé–“ã®æ´»å‹•ã€ã¯ã€åœ°çƒæ¸©æš–åŒ–ã®åŸå› ã¨ãªã£ã¦ã„ã‚‹ã€‚"
},
{
 grammar:"SVOC",
 en:["Many","families","in","developing","countries","expect","their","governments","to","work","out","ways","to","improve","their","living","conditions","."],
 jp:"ç™ºå±•é€”ä¸Šå›½ã®å¤šãã®å®¶åº­ã¯ã€ç”Ÿæ´»ç’°å¢ƒã‚’æ”¹å–„ã™ã‚‹æ–¹æ³•ã‚’æ”¿åºœãŒè¦‹ã¤ã‘å‡ºã—ã¦ãã‚Œã‚‹ã“ã¨ã‚’æœŸå¾…ã—ã¦ã„ã‚‹ã€‚"
},
{
 grammar:"å½¢å¼ä¸»èª it",
 en:["It","is","becoming","increasingly","urgent","for","governments","to","come","up","with","solutions","to","distribute","wealth","more","equally","."],
 jp:"å¯Œã‚’ã‚ˆã‚Šå…¬å¹³ã«åˆ†é…ã™ã‚‹ãŸã‚ã®è§£æ±ºç­–ã‚’è€ƒãˆå‡ºã™ã“ã¨ãŒã€æ”¿åºœã«ã¨ã£ã¦ã¾ã™ã¾ã™ç·Šæ€¥ã®èª²é¡Œã¨ãªã£ã¦ã„ã‚‹ã€‚"
},
{
 grammar:"thatç¯€ã§ä¸»èªã®å†…å®¹ã‚’è¡¨ã™",
 en:["It","is","becoming","a","serious","issue","that","many","students","struggle","to","cope","with","the","stress","caused","by","exams","."],
 jp:"å¤šãã®å­¦ç”ŸãŒè©¦é¨“ã«ã‚ˆã£ã¦ç”Ÿã˜ã‚‹ã‚¹ãƒˆãƒ¬ã‚¹ã«ã†ã¾ãå¯¾å‡¦ã§ããšã«ã„ã‚‹ã“ã¨ãŒã€æ·±åˆ»ãªå•é¡Œã«ãªã‚Šã¤ã¤ã‚ã‚‹ã€‚"
},
{
 grammar:"(V) (O) (C)",
 en:["The","government","should","make","greater","efforts","to","encourage","companies","to","cut","down","on","carbon","dioxide","emissions","."],
 jp:"æ”¿åºœã¯ã€ä¼æ¥­ãŒäºŒé…¸åŒ–ç‚­ç´ ã®æ’å‡ºé‡ã‚’å‰Šæ¸›ã™ã‚‹ã‚ˆã†ä¿ƒã™ãŸã‚ã«ã€ã‚ˆã‚Šä¸€å±¤ã®åŠªåŠ›ã‚’ã™ã¹ãã ã€‚"
},
{
 grammar:"é–¢ä¿‚å‰¯è©",
 en:["Big","international","events","where","many","people","from","all","over","the","world","turn","out","sometimes","cause","cultural","problems","."],
 jp:"ä¸–ç•Œä¸­ã‹ã‚‰å¤šãã®äººã€…ãŒé›†ã¾ã‚‹å¤§è¦æ¨¡ãªå›½éš›ã‚¤ãƒ™ãƒ³ãƒˆã¯ã€ã¨ãã«æ–‡åŒ–çš„ãªå•é¡Œã‚’å¼•ãèµ·ã“ã™ã“ã¨ãŒã‚ã‚‹ã€‚"
},
{
 grammar:"å¯¾æ¯”",
 en:["Many","foreigners","live","in","Japan","nowadays",",","but","some","have","a","hard","time","adapting","to","the","environment","."],
 jp:"ç¾åœ¨ã€æ—¥æœ¬ã«ã¯å¤šãã®å¤–å›½äººãŒä½ã‚“ã§ã„ã‚‹ãŒã€ç’°å¢ƒã«é©å¿œã™ã‚‹ã®ã«è‹¦åŠ´ã—ã¦ã„ã‚‹äººã‚‚ã„ã‚‹ã€‚"
},
{
 grammar:"å½¢å¼ä¸»èª it",
 en:["It","is","becoming","harder","for","some","young","adults","to","stick","to","one","job","due","to","stress","."],
 jp:"ã‚¹ãƒˆãƒ¬ã‚¹ã®ãŸã‚ã«ã€ä¸€ã¤ã®ä»•äº‹ã‚’ç¶šã‘ã‚‹ã“ã¨ãŒä¸€éƒ¨ã®è‹¥è€…ã«ã¨ã£ã¦ã¾ã™ã¾ã™é›£ã—ããªã£ã¦ãã¦ã„ã‚‹ã€‚"
},
{
 grammar:"å½¢å¼ä¸»èª it",
 en:["It","is","becoming","increasingly","urgent","for","some","owners","to","tear","down","old","buildings","before","they","collapse","in","earthquakes","."],
 jp:"è€æœ½åŒ–ã—ãŸå»ºç‰©ãŒåœ°éœ‡ã§å€’å£Šã™ã‚‹å‰ã«å–ã‚Šå£Šã™ã“ã¨ãŒã€ä¸€éƒ¨ã®æ‰€æœ‰è€…ã«ã¨ã£ã¦ã¾ã™ã¾ã™ç·Šæ€¥ã®èª²é¡Œã¨ãªã£ã¦ã„ã‚‹ã€‚"
},
{
 grammar:"ç›®çš„ã‚’è¡¨ã™ä¸å®šè©",
 en:["All","citizens","should","chip","in","to","help","recover","the","country","damaged","by","the","earthquake","."],
 jp:"ã™ã¹ã¦ã®å›½æ°‘ã¯ã€åœ°éœ‡ã«ã‚ˆã£ã¦è¢«å®³ã‚’å—ã‘ãŸå›½ã®å¾©èˆˆã®ãŸã‚ã«ã€åŠ›ã‚’åˆã‚ã›ã¦å”åŠ›ã™ã¹ãã ã€‚"
},
{
 grammar:"å½¢å¼ä¸»èª it",
 en:["It","is","becoming","increasingly","difficult","for","people","to","count","on","the","government","when","they","lose","jobs","during","recessions","."],
 jp:"ä¸æ³ã®æ™‚æœŸã«å¤±æ¥­ã—ãŸå ´åˆã€æ”¿åºœã‚’é ¼ã‚‹ã“ã¨ãŒäººã€…ã«ã¨ã£ã¦ã¾ã™ã¾ã™é›£ã—ããªã£ã¦ãã¦ã„ã‚‹ã€‚"
},
{
 grammar:"é–¢ä¿‚ä»£åè©",
 en:["The","government","should","establish","an","organization","to","support","young","people","who","have","dropped","out","of","society","."],
 jp:"æ”¿åºœã¯ã€ç¤¾ä¼šã‹ã‚‰é›¢è„±ã—ãŸè‹¥è€…ã‚’æ”¯æ´ã™ã‚‹çµ„ç¹”ã‚’ç«‹ã¡ä¸Šã’ã‚‹ã¹ãã ã€‚"
}
];

let cur=0, dragged=null;

function loadQ(){
  message.textContent="";
  nextBtn.style.display="none";
  const q=data[cur];
  qnum.textContent="Q"+(cur+1);
  grammar.textContent=q.grammar;
  jp.textContent=q.jp;
  answerRow.innerHTML="";
  cardRow.innerHTML="";
  q.en.forEach((w,i)=>{
    answerRow.appendChild(makeSlot());
    cardRow.appendChild(makeSlot(w,i));
  });
  shuffle();
}

function makeSlot(word="",home=null){
  const s=document.createElement("div");
  s.className="slot";
  s.ondragover=e=>e.preventDefault();
  s.ondrop=()=>{ if(dragged && !s.firstChild) s.appendChild(dragged); };
  if(word){
    const c=document.createElement("div");
    c.className="card";
    c.textContent=word;
    c.dataset.home=home;
    c.draggable=true;
    c.onclick=()=>tapMove(c);
    c.ondragstart=()=>dragged=c;
    s.appendChild(c);
  }
  s.onclick=()=>{
    if(s.parentElement.id==="answerRow" && s.firstChild){
      cardRow.children[s.firstChild.dataset.home].appendChild(s.firstChild);
    }
  };
  return s;
}

function tapMove(card){
  const empty=[...answerRow.children].find(s=>!s.firstChild);
  if(empty) empty.appendChild(card);
}

function shuffle(){
  const cards=[...document.querySelectorAll(".card")];
  cardRow.querySelectorAll(".slot").forEach(s=>s.innerHTML="");
  cards.sort(()=>Math.random()-.5)
       .forEach((c,i)=>cardRow.children[i].appendChild(c));
}

function checkAnswer(){
  const ans=[...answerRow.children].map(s=>s.firstChild?.textContent||"");
  if(JSON.stringify(ans)===JSON.stringify(data[cur].en)){
    message.textContent="Correct! âœ…";
    speak();
    nextBtn.style.display="inline-block";
  }else{
    message.textContent="Try again âŒ";
  }
}

function speak(){
  const u=new SpeechSynthesisUtterance(data[cur].en.join(" "));
  u.lang="en-US";
  u.rate=0.75; // â† Google US ã‚†ã£ãã‚Š75
  speechSynthesis.speak(u);
}

function nextQ(){
  cur++;
  cur===data.length ? finish() : loadQ();
}

function finish(){
  message.textContent="å…¨éƒ¨å®Œæˆï¼Perfect!! ğŸ‰";
  launchConfetti();
}

function launchConfetti(){
  const canvas = document.getElementById("confetti");
  const ctx = canvas.getContext("2d");
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const pieces = Array.from({length:120}, () => ({
    x: Math.random()*canvas.width,
    y: Math.random()*canvas.height - canvas.height,
    r: Math.random()*6+4,
    c: `hsl(${Math.random()*360},80%,60%)`,
    s: Math.random()*3+2
  }));

  let t = 0;
  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    pieces.forEach(p=>{
      ctx.fillStyle=p.c;
      ctx.beginPath();
      ctx.arc(p.x,p.y+=p.s,p.r,0,Math.PI*2);
      ctx.fill();
    });
    if(t++ < 180) requestAnimationFrame(draw);
    else ctx.clearRect(0,0,canvas.width,canvas.height);
  }
  draw();
}

function shuffleArray(arr){
  const a=[...arr];
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

function makePDF(){
  const w = window.open("");

  /* ========= å•é¡Œãƒšãƒ¼ã‚¸ ========= */
  w.document.write(`
  <html>
  <head>
    <style>
      body{
        font-family:"Hiragino Maru Gothic ProN";
        padding:24px;
      }
      h2{text-align:center;}
      .q{
        margin-bottom:22px;
        page-break-inside: avoid;
      }
      .jp{color:#555;}
      .words{font-size:13px;margin:6px 0;}
      .line{
        border-bottom:1px solid #000;
        height:22px;
        margin-bottom:4px;
      }
      .page-break{
        page-break-before: always;
      }
    </style>
  </head>
  <body>
    <h2>æº–ï¼‘ç´š Day53 Writing ä¸¦ã¹æ›¿ãˆç·´ç¿’</h2>
    Name: ____________ã€€Date: ____________
  `);

  data.forEach((q,i)=>{
    const shuffled = shuffleArray(q.en);
    w.document.write(`
      <div class="q">
        <b>Q${i+1}ã€${q.grammar}ã€‘</b><br>
        ï¼ˆ${q.jp}ï¼‰<br>
        <div class="words">${shuffled.join(" / ")}</div>
        <div class="line"></div>
        <div class="line"></div>
      </div>
    `);
  });

  /* ========= ç­”ãˆãƒšãƒ¼ã‚¸ï¼ˆåˆ¥ãƒšãƒ¼ã‚¸ï¼‰ ========= */
  w.document.write(`
    <div class="page-break"></div>
    <h2>Answer</h2>
  `);

  data.forEach((q,i)=>{
    w.document.write(`
      <div class="q">
        <b>Q${i+1}</b><br>
        ${q.en.join(" ")}
      </div>
    `);
  });

  w.document.write(`
  </body>
  </html>
  `);

  w.document.close();
  w.print();
}

loadQ();
totalQ.textContent = data.length;
</script>
</body>
</html>
